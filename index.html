<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Playlist do Multiverso Shrek</title>
  <style>
    /* ğŸ¨ Estilo geral da pÃ¡gina */
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f0f0f0;
    }

    h1 {
      text-align: center;
    }

    /* ğŸ” Estilo do botÃ£o de reset */
    .controls {
      text-align: center;
      margin-bottom: 20px;
    }

    .controls button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #2196f3;
      color: white;
      border: none;
      border-radius: 6px;
    }

    /* ğŸµ Linha de cada playlist (ex: Favoritas, Triste...) */
    .playlist {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    /* ğŸ¼ Nome da playlist */
    .playlist-label {
      width: 120px;
      font-weight: bold;
    }

    /* ğŸ§ EspaÃ§o onde faixas sÃ£o colocadas (drag & drop) */
    .playlist-slot {
      flex: 1;
      min-height: 60px;
      background-color: white;
      border: 2px dashed #ccc;
      padding: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* ğŸ¶ Estilo visual da faixa/mÃºsica */
    .track {
      width: 60px;
      height: 60px;
      cursor: grab;
      border-radius: 8px;
      overflow: hidden;
      border: 2px solid #4caf50;
      background-color: white;
    }

    /* ğŸ–¼ï¸ Imagem de cada faixa (gerada automaticamente) */
    .track img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <h1>Playlist do Multiverso Shrek ğŸµ</h1>

  <!-- ğŸ” BotÃ£o para resetar a playlist -->
  <div class="controls">
    <button onclick="resetPlaylist()">Resetar Playlist</button>
  </div>

  <!-- ğŸšï¸ Container das playlists (linhas com nomes) -->
  <div id="playlists-container"></div>

  <h2>Faixas DisponÃ­veis</h2>

  <!-- ğŸ² Container das faixas soltas (nÃ£o atribuÃ­das a playlists) -->
  <div id="tracks-container" class="playlist-slot"></div>

  <script>
    // ğŸ·ï¸ Nomes das playlists (em vez de S, A, B...)
    const playlistLabels = ['Favoritas', 'Chill', 'Festa', 'Triste', 'AleatÃ³rias'];

    // ğŸ¼ Lista de faixas (inspiradas no "Multiverso Shrek")
    const tracks = [
      'Shrek Love Song',
      'Shrek Funk Remix',
      'Shrek Emo Ballad',
      'Shrek Sertanejo Raiz',
      'Shrek Trap',
      'Shrek AxÃ©',
      'Shrek Gospel',
      'Shrek Pagode',
      'Shrek MPB',
      'Shrek Rock Nacional',
      'Shrek MeditaÃ§Ã£o',
      'Shrek Techno',
      'Shrek EletrÃ´nica',
      'Shrek ForrÃ³ das Antigas',
      'Shrek no Samba',
      'Shrek Boate Azul',
      'Shrek Lofi Beats',
      'Shrek Internacional',
      'Shrek AcÃºstico MTV',
      'Shrek do Grau Musical'
    ];

    // ğŸ”  Gera uma imagem de capa para a faixa usando o nome
    function getImageUrl(name) {
      const cleanText = name
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-zA-Z0-9 ]/g, '')
        .trim()
        .replace(/\s+/g, '+');

      return `https://dummyimage.com/150x150/87ceeb/000000&text=${cleanText}`;
    }

    // ğŸ’¾ Carrega dados do localStorage ou cria nova estrutura
    function loadPlaylist() {
      const data = localStorage.getItem('shrekPlaylist');
      if (data) {
        return JSON.parse(data);
      } else {
        // Inicializa: todas as faixas estÃ£o fora das playlists
        return {
          tracks: [...tracks],
          playlists: Object.fromEntries(playlistLabels.map(label => [label, []]))
        };
      }
    }

    // ğŸ’¾ Salva dados no localStorage
    function savePlaylist(data) {
      localStorage.setItem('shrekPlaylist', JSON.stringify(data));
    }

    // ğŸ” Reseta todas as playlists e volta ao inÃ­cio
    function resetPlaylist() {
      localStorage.removeItem('shrekPlaylist');
      render(); // Re-renderiza interface
    }

    // ğŸ§  Renderiza a interface da playlist na tela
    function render() {
      const data = loadPlaylist();

      const playlistsContainer = document.getElementById('playlists-container');
      playlistsContainer.innerHTML = '';

      // Cria visualmente cada playlist
      for (const label of playlistLabels) {
        const playlistDiv = document.createElement('div');
        playlistDiv.className = 'playlist';

        const labelDiv = document.createElement('div');
        labelDiv.className = 'playlist-label';
        labelDiv.textContent = label;

        const slotDiv = document.createElement('div');
        slotDiv.className = 'playlist-slot';
        slotDiv.dataset.playlist = label;

        // Permite soltar faixas nesta playlist
        slotDiv.addEventListener('dragover', e => e.preventDefault());
        slotDiv.addEventListener('drop', handleDrop);

        // Adiciona as faixas jÃ¡ atribuÃ­das a esta playlist
        for (const track of data.playlists[label]) {
          const trackDiv = createTrackDiv(track);
          slotDiv.appendChild(trackDiv);
        }

        playlistDiv.appendChild(labelDiv);
        playlistDiv.appendChild(slotDiv);
        playlistsContainer.appendChild(playlistDiv);
      }

      // ğŸ² Renderiza faixas que ainda estÃ£o soltas (nÃ£o atribuÃ­das)
      const tracksContainer = document.getElementById('tracks-container');
      tracksContainer.innerHTML = '';
      tracksContainer.dataset.playlist = 'tracks';
      tracksContainer.addEventListener('dragover', e => e.preventDefault());
      tracksContainer.addEventListener('drop', handleDrop);

      for (const track of data.tracks) {
        const trackDiv = createTrackDiv(track);
        tracksContainer.appendChild(trackDiv);
      }
    }

    // ğŸ‘¤ Cria o elemento visual de uma faixa/mÃºsica
    function createTrackDiv(name) {
      const div = document.createElement('div');
      div.className = 'track';
      div.draggable = true;

      const img = document.createElement('img');
      img.src = getImageUrl(name);
      img.alt = name;

      div.appendChild(img);

      // Salva o nome da faixa durante o drag
      div.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', name);
      });

      return div;
    }

    // ğŸ¯ Ao soltar uma faixa em alguma playlist (ou Ã¡rea de faixas)
    function handleDrop(e) {
      e.preventDefault();
      const trackName = e.dataTransfer.getData('text/plain');
      const targetPlaylist = e.currentTarget.dataset.playlist;

      const data = loadPlaylist();

      // Remove a faixa de onde quer que ela esteja
      data.tracks = data.tracks.filter(t => t !== trackName);
      for (const p of playlistLabels) {
        data.playlists[p] = data.playlists[p].filter(t => t !== trackName);
      }

      // Adiciona a faixa na playlist correta
      if (targetPlaylist === 'tracks') {
        data.tracks.push(trackName);
      } else {
        data.playlists[targetPlaylist].push(trackName);
      }

      // Salva e atualiza a interface
      savePlaylist(data);
      render();
    }

    // ğŸš€ Inicializa tudo ao carregar a pÃ¡gina
    render();
  </script>
</body>
</html>
