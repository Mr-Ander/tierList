<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Tier List do Shrek</title>
  <style>
    /* 🎨 Estilo geral da página */
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f0f0f0;
    }

    h1 {
      text-align: center;
    }

    /* 🔁 Estilo do botão de reset */
    .controls {
      text-align: center;
      margin-bottom: 20px;
    }

    .controls button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #ff6961;
      color: white;
      border: none;
      border-radius: 6px;
    }

    /* 📊 Linha de cada tier */
    .tier {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .tier-label {
      width: 50px;
      font-weight: bold;
    }

    .tier-slot {
      flex: 1;
      min-height: 60px;
      background-color: white;
      border: 2px dashed #ccc;
      padding: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* 👤 Personagem arrastável */
    .character {
      width: 60px;
      height: 60px;
      cursor: grab;
      border-radius: 8px;
      overflow: hidden;
      border: 2px solid #4caf50;
      background-color: white;
    }

    .character img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <h1>Tier List do Multiverso Shrek 🧅</h1>

  <!-- 🔁 Botão para reiniciar a lista -->
  <div class="controls">
    <button onclick="resetTierList()">Resetar Tier List</button>
  </div>

  <!-- 📊 Container dos tiers -->
  <div id="tiers-container"></div>

  <h2>Variações Disponíveis</h2>

  <!-- 🎲 Personagens ainda não alocados -->
  <div id="characters-container" class="tier-slot"></div>

  <script>
    // 🔠 Níveis dos tiers
    const tierLabels = ['S', 'A', 'B', 'C', 'D'];

    // 📋 Lista dos personagens do "Multiverso Shrek"
    const characters = [
      'Shrek Agiota',
      'Shrek do Rio de Janeiro',
      'Shrek Emo',
      'Shrek Nutella',
      'Shrek Raiz',
      'Shrek Universitário',
      'Shrek de Crocs',
      'Shrek Coach de Vida',
      'Shrek Gamer',
      'Shrek Evangélico',
      'Shrek Pagodeiro',
      'Shrek Sertanejo Universitário',
      'Shrek Influencer',
      'Shrek Zé Droguinha',
      'Shrek Bolsominion',
      'Shrek do Grau',
      'Shrek com NFT',
      'Shrek Maconheiro',
      'Shrek de Gravata',
      'Shrek da Deep Web'
    ];

    // 🖼️ Gera a URL de imagem com texto usando dummyimage.com
    function getImageUrl(name) {
      const cleanText = name
        .normalize('NFD') // Quebra caracteres acentuados
        .replace(/[\u0300-\u036f]/g, '') // Remove os acentos
        .replace(/[^a-zA-Z0-9 ]/g, '') // Remove caracteres especiais
        .trim()
        .replace(/\s+/g, '+'); // Substitui espaços por +

      return `https://dummyimage.com/150x150/90ee90/000000&text=${cleanText}`;
    }

    // 💾 Carrega a tier list do localStorage ou cria uma nova
    function loadTierList() {
      const data = localStorage.getItem('shrekTierList');
      if (data) {
        return JSON.parse(data);
      } else {
        return {
          characters: [...characters],
          tiers: {
            S: [],
            A: [],
            B: [],
            C: [],
            D: []
          }
        };
      }
    }

    // 💾 Salva o estado atual da tier list no localStorage
    function saveTierList(data) {
      localStorage.setItem('shrekTierList', JSON.stringify(data));
    }

    // 🔁 Reseta toda a tier list (remove do localStorage)
    function resetTierList() {
      localStorage.removeItem('shrekTierList');
      render(); // Recarrega a interface
    }

    // 🧠 Renderiza a tier list na tela
    function render() {
      const data = loadTierList();

      const tiersContainer = document.getElementById('tiers-container');
      tiersContainer.innerHTML = ''; // Limpa antes de criar de novo

      // Cria cada linha de tier (S, A, B, etc.)
      for (const label of tierLabels) {
        const tierDiv = document.createElement('div');
        tierDiv.className = 'tier';

        const labelDiv = document.createElement('div');
        labelDiv.className = 'tier-label';
        labelDiv.textContent = label;

        const slotDiv = document.createElement('div');
        slotDiv.className = 'tier-slot';
        slotDiv.dataset.tier = label;

        // Permitir arrastar e soltar
        slotDiv.addEventListener('dragover', e => e.preventDefault());
        slotDiv.addEventListener('drop', handleDrop);

        // Adiciona personagens que já estão neste tier
        for (const char of data.tiers[label]) {
          const charDiv = createCharacterDiv(char);
          slotDiv.appendChild(charDiv);
        }

        tierDiv.appendChild(labelDiv);
        tierDiv.appendChild(slotDiv);
        tiersContainer.appendChild(tierDiv);
      }

      // 🎲 Renderiza os personagens que ainda não foram posicionados
      const charactersContainer = document.getElementById('characters-container');
      charactersContainer.innerHTML = '';
      charactersContainer.dataset.tier = 'characters';
      charactersContainer.addEventListener('dragover', e => e.preventDefault());
      charactersContainer.addEventListener('drop', handleDrop);

      for (const char of data.characters) {
        const charDiv = createCharacterDiv(char);
        charactersContainer.appendChild(charDiv);
      }
    }

    // 👤 Cria o elemento visual de um personagem
    function createCharacterDiv(name) {
      const div = document.createElement('div');
      div.className = 'character';
      div.draggable = true;

      const img = document.createElement('img');
      img.src = getImageUrl(name);
      img.alt = name;

      div.appendChild(img);

      // Salva o nome do personagem no arrastar
      div.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', name);
      });

      return div;
    }

    // 🎯 Lógica de soltar personagem em uma área (tier ou container inicial)
    function handleDrop(e) {
      e.preventDefault();
      const charName = e.dataTransfer.getData('text/plain');
      const targetTier = e.currentTarget.dataset.tier;

      const data = loadTierList();

      // Remove o personagem de onde ele estiver
      data.characters = data.characters.filter(c => c !== charName);
      for (const t of tierLabels) {
        data.tiers[t] = data.tiers[t].filter(c => c !== charName);
      }

      // Adiciona o personagem no local correto
      if (targetTier === 'characters') {
        data.characters.push(charName);
      } else {
        data.tiers[targetTier].push(charName);
      }

      saveTierList(data);
      render();
    }

    // 🚀 Inicia tudo ao carregar a página
    render();
  </script>
</body>
</html>
